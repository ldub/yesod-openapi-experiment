# Yesod OpenAPI Experiment

This repository demonstrates generating a Yesod API from an OpenAPI specification and then consuming the generated code as stubs in a separate production server.

## Files

- `openapi.json` – Minimal "Hello World" OpenAPI 3 specification exposing a single `/hello` endpoint.
- `generate.sh` – Script that invokes `openapi-generator-cli` to produce the Yesod stub code in `generated-server/`.
- `generated-server/` – Code generated by OpenAPI Generator. It can be regenerated at any time and is treated as a library of stubs.
- `server/` – Hand written Yesod project that depends on `generated-server` and implements the real handlers.

## Usage

1. Ensure `openapi-generator-cli` is installed and available on your `PATH`.
   You can install it via Homebrew (`brew install openapi-generator`) or
   download the JAR from the OpenAPI Generator releases.
   Alternatively you can use the provided Docker command inside `generate.sh`.

2. Run the generator script:

   ```bash
   ./generate.sh
   ```

   The generated stubs will be placed in `generated-server/`.

3. Build the production server inside `server/` using `stack` or `cabal`. The `stack.yaml` in that folder references the generated package as a local dependency.

Refer to the [Haskell Yesod generator documentation](https://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/haskell-yesod.md) for available options.
